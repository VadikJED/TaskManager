<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:TaskManager.ViewModels"
        xmlns:model="clr-namespace:TaskManager.Models"
        x:Class="TaskManager.Views.MainWindow"
        Title="Task Manager"
        MinWidth="600"
        MinHeight="400"
        Width="800"
        Height="600"
        x:DataType="vm:MainViewModel">

       <Design.DataContext>
        <vm:MainViewModel />
    </Design.DataContext>

    <DockPanel Margin="20">
        <!-- Header -->
        <StackPanel DockPanel.Dock="Top" Spacing="10" Margin="0,0,0,20">
            <TextBlock Text="Task Manager" FontSize="24" FontWeight="Bold"/>
            
            <!-- Add Task Section -->
            <StackPanel Orientation="Horizontal" Spacing="10">
                <TextBox Text="{Binding NewTaskTitle}"
                         Watermark="Enter task title..." 
                         Width="300"
                         KeyDown="OnNewTaskKeyDown"/>
                <Button Content="Add Task" 
                        Command="{Binding AddTaskCommand}"/>
            </StackPanel>

            <!-- Error Message -->
            <TextBlock Text="{Binding ErrorMessage}" 
                       Foreground="Red" 
                       TextWrapping="Wrap"
                       IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
        </StackPanel>

        <!-- Tasks List -->
        <ListBox ItemsSource="{Binding Tasks}"
                 Background="Transparent"
                 BorderThickness="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Background="White" 
                            BorderBrush="#E0E0E0" 
                            BorderThickness="0,0,0,1" 
                            Padding="15,10">
                        <Grid ColumnDefinitions="Auto,*,Auto" VerticalAlignment="Center">
                            <!-- Completion Checkbox -->
                            <CheckBox Grid.Column="0" 
                                      IsChecked="{Binding IsCompleted}"
                                      Margin="0,0,15,0"
                                      Click="OnTaskCheckBoxClick"/>
                            
                            <!-- Task Title -->
                            <TextBlock Grid.Column="1" 
                                       Text="{Binding Title}" 
                                       VerticalAlignment="Center"/>
                            
                            <!-- Delete Button -->
                            <Button Grid.Column="2" 
                                    Content="Delete"
                                    Background="#FF4444"
                                    Foreground="White"
                                    Padding="10,5"
                                    Click="OnDeleteTaskClick"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DockPanel>
</Window>